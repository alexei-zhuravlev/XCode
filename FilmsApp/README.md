#  Итоговый проект для курса iOS-разработчик SkillFactory

_Задача проекта - создать приложение, которое будет отображать список фильмов (из TMDB), с возможностью посмотреть подробную информацию о каждом фильме, посмотреть фотографии фильма (кадры из фильма), составить список любимых фильмов и хранить его в телефоне_

## Первый шаг (реализовано на данный момент по заданию SkillFactory)

- Сформированы 5 экранов (4 из них пока пусты)
- Добавлен NavigationController
- На первый (главный) экран добавлена CollectionView
- Сделан макет отображения информации в ячейке CollectionView
- На тестовом массиве "фильмов" опробовано отображение информации
- По заданию SkillFactory в макете ячейки использованы только Constraints без Stack
- Изображение (постер) имеет фиксированный размер
- Название фильма - жирным шрифтом
- Текстовая информация занимает менее 30% ячейки
- Отступы реализованы с помощью Constraints и - _на мой взгляд_ - вполне симпатично смотрятся

## Второй шаг (реализовано на данный момент по заданию SkillFactory)

- создан кастомный экран подробной карчтоки фильма (CustomDetailFilmView)
- при создании экрана использовался ScrollView для всего экрана
- лейблы "Год выпуска" и "Рейтинг" объединены в Stack
- на постер "прикручен" жест
- по двойному тапу на постер открывается экран с полноразмерным изображением постера
- кастомный экран в данный момент выбран в качестве Initial Screen


## Третий шаг (Задание модуля Проектный юнит 6.4)

- в NavigationBar добавлена кнопка перехода к экрану со списком выбранных фильмов (_делать кнопку вне NavigationBar мне показалось не эстетичным_)
- на карточку с детальной информацией о фильме добавлена кнопка с сердечком (включение фильма в список избранных)
- кнопка на карточке с детальной информацией о фильме меняет свое изображение: если фильм отсутствует в списке избранных - кнопка сердечком, если фильм уже есть в списке избранных - кнопка "мусорная корзина" (чтобы можно было удалить фильм из списка избранных)
- реализована передача данных об избранных фильмах при переходе на экран избранных фильмов
- реализован переход с экрана со списком избранных фильмов на экран с детальной информацией о фильме
- НЕ СДЕЛАНО при нажатии кнопки "добавить в избранное" не происходит добавления фильмов в список избранных (собственно, не ставилась такая задача, во-перых; а во-вторых, это будет удобнее (без static let) реализовать в следующем модуле, где будет внедрена REALM в качестве базы данных, где и будем менять значение, маркирующее присутствие фильма в списке понравившихся)

## Четвертый шаг

- В проект добавлен Realm (через SwiftPM)
- Вместо ранее использовавшегося тестового массива теперь идет работа с базой данных Realm
- Во все контроллеры (и т.п.) внесены необходимые правки для получения доступа к данным БД Realm

## Пятый шаг
- В проект добавлен URLService для выполнения запросов к API TMDB
- В URLService реализованы методы получения данных для формирования списков фильмов по заданному критерию (последние, с высоким рейтингом, популярные, сейчас в кино и скоро в кино)
- Данные, получаемые URLService пока просто выводятся в консоль
- Чтобы проверить факт того, что запросы работают в viewDidLoad MainViewController добавлены вызовы методов класса URLService (в последствии можно будет удалить)

## Шестой шаг

- Реализована загрузка получаемых по API данных в БД 
- Реализована работа приложения с БД (вместо ранее использовавшихся "тестовых" массивов)
- Приложение получает данные (при открытии), приложение обновляет список избранных фильмов, осуществляет поиск по БД и сортировку отображаемого списка фильмов
- Реализовано кэширование изображений
- Реализовано получение скриншотов к фильму внутри общего запроса к API (иногда скриншоты - это просто постеры фильма, но именно такое наполнение в TMDB: где-то реальные кадры съемок, а где-то постеры)
- Добавлен UNIT-тест (проверяет происходит ли скачивание информации по запросу к API) (тест проходит успешно)
- Добавлены UI-тесты (запускаем приложение, проверяем первый экран (заголовок экрана, проверяем, что экран не пустой, проверяем название первого фильма, находим кнопку перехода на второй экран), проверяем переход на второй экран по нажатию кнопки, проверяем на втором экране название экрана, проверяем что экран не пустой (в моем случае - так как предварительно был сформирован список избранных фильмов)) (тесты проходят успешно)

__Пока из несделанного__ - совершенно непонятно почему вдруг стала вылетать ошибка, сообщающая, что обращение к БД realm идет из неверного потока. Не понимаю почему... Вроде бы все обращения к realm перевел в main и все равно ошибка вылетает...   

## Седьмой шаг

- Вроде бы вылет, о котором писал в 6 шаге, происходит при попытке загрузить скриншоты фильма "одновременно" с данными собственно фильма
- Ошибку с вылетом приложения из-за обращения к БД не из того потока решил пока тем, что подгрузку скриншотов осуществляю с экрана детальной информации о фильме (что в принципе логично - если человек не хотел детальной инфы по фильму, то зачем подгружать десятки никому не нужных ссылок на картинки). При копировании фильма в базу "избранные" информация уже переносится с подгруженными скриншотами. __Все заработало без вылетов__

